<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hritik Kushwaha</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: linear-gradient(135deg, #000000 0%, #1a1a1a 100%);
            color: #00ff88;
            font-family: 'Courier New', Courier, monospace;
            overflow-x: hidden;
            scroll-behavior: smooth;
        }
        /* Header Section */
        
        .header-section {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            position: relative;
            background: radial-gradient(circle at center, rgba(0, 255, 136, 0.1) 0%, transparent 70%);
        }
        
        .typing {
            font-size: clamp(20px, 4vw, 48px);
            border-right: 3px solid #00ff88;
            white-space: nowrap;
            overflow: hidden;
            width: 0;
            animation: typing 4s steps(45, end) forwards, blink 0.75s step-end infinite;
            margin-bottom: 30px;
            text-shadow: 0 0 20px rgba(0, 255, 136, 0.5);
        }
        
        @keyframes typing {
            from {
                width: 0
            }
            to {
                width: 45ch
            }
        }
        
        @keyframes blink {
            from,
            to {
                border-color: transparent
            }
            50% {
                border-color: #00ff88
            }
        }
        
        .subtitle {
            font-size: clamp(14px, 2vw, 20px);
            color: #00ccaa;
            margin-bottom: 40px;
            opacity: 0;
            animation: fadeInUp 2s ease 2s forwards;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .scroll-indicator {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            color: #00ff88;
            font-size: 18px;
            animation: bounce 2s infinite;
            cursor: pointer;
        }
        
        @keyframes bounce {
            0%,
            20%,
            50%,
            80%,
            100% {
                transform: translateX(-50%) translateY(0);
            }
            40% {
                transform: translateX(-50%) translateY(-10px);
            }
            60% {
                transform: translateX(-50%) translateY(-5px);
            }
        }
        /* Weather Simulation Section */
        
        .weather-section {
            min-height: 100vh;
            padding: 40px 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            background: linear-gradient(180deg, rgba(0, 0, 0, 0.9) 0%, rgba(26, 26, 26, 0.9) 100%);
        }
        
        .weather-container {
            max-width: 1000px;
            width: 100%;
            background: rgba(0, 0, 0, 0.7);
            border: 3px solid #00ff88;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 0 40px rgba(0, 255, 136, 0.3), inset 0 0 20px rgba(0, 255, 136, 0.05);
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }
        
        .weather-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, rgba(0, 255, 136, 0.1) 0%, transparent 25%, transparent 75%, rgba(0, 255, 136, 0.1) 100%);
            pointer-events: none;
            border-radius: 17px;
        }
        
        .weather-container>* {
            position: relative;
            z-index: 1;
        }
        
        .section-title {
            font-size: clamp(24px, 5vw, 42px);
            color: #00ff88;
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 0 0 15px rgba(0, 255, 136, 0.5);
        }
        
        .section-subtitle {
            font-size: clamp(14px, 2vw, 18px);
            color: #00ccaa;
            text-align: center;
            margin-bottom: 30px;
        }
        
        canvas {
            border: 3px solid #00ff88;
            background: #87CEEB;
            box-shadow: 0 0 30px rgba(0, 255, 136, 0.3);
            border-radius: 10px;
            max-width: 100%;
            height: auto;
        }
        
        .controls {
            margin: 30px 0;
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        button {
            padding: 12px 24px;
            font-size: 16px;
            font-family: 'Courier New', Courier, monospace;
            border: 2px solid #00ff88;
            border-radius: 25px;
            background: linear-gradient(145deg, rgba(0, 0, 0, 0.8), rgba(26, 26, 26, 0.8));
            color: #00ff88;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 255, 136, 0.2), transparent);
            transition: left 0.5s;
        }
        
        button:hover::before {
            left: 100%;
        }
        
        button:hover {
            background: linear-gradient(145deg, rgba(0, 255, 136, 0.1), rgba(0, 204, 170, 0.1));
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 255, 136, 0.3);
        }
        
        button.active {
            background: linear-gradient(145deg, rgba(0, 255, 136, 0.3), rgba(0, 204, 170, 0.3));
            box-shadow: 0 0 20px rgba(0, 255, 136, 0.6);
            transform: scale(1.05);
        }
        
        input[type="range"] {
            margin-left: 15px;
            width: 120px;
            height: 6px;
            background: linear-gradient(to right, #333, #00ff88);
            outline: none;
            border-radius: 3px;
            appearance: none;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            appearance: none;
            width: 20px;
            height: 20px;
            background: radial-gradient(circle, #00ff88, #00ccaa);
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(0, 255, 136, 0.5);
        }
        
        input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            background: radial-gradient(circle, #00ff88, #00ccaa);
            border-radius: 50%;
            cursor: pointer;
            border: none;
            box-shadow: 0 0 10px rgba(0, 255, 136, 0.5);
        }
        
        .audio-info,
        .loading-status {
            margin: 15px 0;
            font-size: 14px;
            color: #00ccaa;
            text-align: center;
            line-height: 1.6;
        }
        
        .loading-status {
            font-size: 12px;
            color: #888;
        }
        /* Contact Form Section */
        
        .contact-section {
            min-height: 100vh;
            padding: 40px 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            background: linear-gradient(180deg, rgba(26, 26, 26, 0.9) 0%, rgba(0, 0, 0, 0.9) 100%);
        }
        
        .form-container {
            max-width: 800px;
            width: 100%;
            background: rgba(0, 0, 0, 0.7);
            border: 2px solid #00ff88;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 0 40px rgba(0, 255, 136, 0.2);
            backdrop-filter: blur(10px);
        }
        
        .form-container iframe {
            border-radius: 10px;
            border: 1px solid rgba(0, 255, 136, 0.3);
        }
        /* Footer */
        
        .footer {
            padding: 30px 20px;
            text-align: center;
            background: rgba(0, 0, 0, 0.9);
            border-top: 2px solid #00ff88;
        }
        
        .creator-info {
            font-size: 18px;
            color: #00ff88;
            font-weight: bold;
            text-shadow: 0 0 10px rgba(0, 255, 136, 0.5);
            margin-bottom: 10px;
        }
        
        .credits {
            font-size: 14px;
            color: #00ccaa;
            margin-top: 15px;
        }
        /* Responsive Design */
        
        @media (max-width: 768px) {
            .controls {
                gap: 10px;
            }
            button {
                padding: 10px 18px;
                font-size: 14px;
            }
            .form-container {
                padding: 20px;
                margin: 0 10px;
            }
            .weather-container {
                padding: 25px;
                margin: 0 10px;
            }
            .typing {
                font-size: 18px;
                width: auto;
                max-width: 90vw;
            }
            @keyframes typing {
                from {
                    width: 0
                }
                to {
                    width: 100%
                }
            }
        }
        /* Scrollbar Styling */
        
         ::-webkit-scrollbar {
            width: 12px;
        }
        
         ::-webkit-scrollbar-track {
            background: #1a1a1a;
        }
        
         ::-webkit-scrollbar-thumb {
            background: linear-gradient(45deg, #00ff88, #00ccaa);
            border-radius: 6px;
        }
        
         ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(45deg, #00ccaa, #00ff88);
        }
    </style>
</head>

<body>
    <!-- Header Section -->
    <section class="header-section" id="home">
        <div class="typing">I am Hritik Kushwaha Typing Alphabet...</div>

        <div class="scroll-indicator" onclick="document.getElementById('weather').scrollIntoView()">
            ↓ Explore My Projects ↓
        </div>
    </section>

    <!-- Weather Simulation Section -->
    <section class="weather-section" id="weather">
        <div class="weather-container">
            <div class="section-title">🌤️ Interactive Weather Simulation 🌤️</div>
            <div class="section-subtitle">Click the buttons below to change the weather!</div>

            <div class="controls">
                <button onclick="changeWeather('h')" id="sunny-btn" class="active">☀️ Sunny</button>
                <button onclick="changeWeather('r')" id="rain-btn">🌧️ Rain</button>
                <button onclick="changeWeather('s')" id="snow-btn">❄️ Snow</button>
                <button onclick="changeWeather('t')" id="thunder-btn">⚡ Thunder</button>
                <button onclick="changeWeather('c')" id="cloudy-btn">☁️ Cloudy</button>
                <button onclick="toggleMute()" id="mute-btn">🔊 Sound</button>
                <input type="range" id="volume-slider" min="0" max="100" value="30" oninput="setVolume(this.value)">
            </div>

            <canvas id="gameCanvas" width="640" height="480"></canvas>

            <div class="loading-status" id="loading-status">🎵 Loading audio system...</div>

            <div class="audio-info">
                <p>🎵 Audio: High-quality synthetic weather sounds using Web Audio API</p>
                <p>🎮 Controls: Click weather buttons or use R/S/T/C/H keys • M key to mute</p>
                <p style="font-size: 12px; color: #00ff88;">✅ Using advanced Web Audio synthesis - no external dependencies!</p>
            </div>
        </div>
    </section>

    <!-- Contact Form Section -->
    <section class="contact-section" id="contact">
        <div class="section-title">📬 Get In Cross...</div>

        <div class="form-container">
            <iframe data-tally-src="https://tally.so/r/wL2Mgz" loading="lazy" width="100%" height="600" frameborder="0" marginheight="0" marginwidth="0" title="Contact Hritik Kushwaha"></iframe>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="creator-info">Modified by Hritik Kushwaha</div>
        <div class="credits">
            HTML5, CSS3, JavaScript & Canvas API
        </div>
    </footer>

    <!-- Tally Form Script -->
    <script>
        (function(d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) return;
            js = d.createElement(s);
            js.id = id;
            js.src = "https://tally.so/widgets/embed.js";
            fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'tally-js'));
    </script>

    <!-- Weather Simulation Script -->
    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        // Audio system with enhanced synthetic sounds
        class AudioManager {
            constructor() {
                this.sounds = {};
                this.currentSound = null;
                this.currentGainNode = null; // Track the current gain node for real-time volume control
                this.volume = 0.3; // Default volume (30%)
                this.initialized = false;
                this.audioContext = null;
                // Initialize synthetic sounds immediately
                this.initSyntheticSounds();
            }

            initSyntheticSounds() {
                try {
                    this.audioContext = new(window.AudioContext || window.webkitAudioContext)();

                    // Create all synthetic sounds with correct mapping
                    this.sounds = {
                        h: () => this.playFallbackSunny(), // sunny
                        r: () => this.playFallbackRain(), // rain
                        s: () => this.playFallbackSnow(), // snow
                        t: () => this.playFallbackThunder(), // thunder
                        c: () => this.playFallbackCloudy() // cloudy
                    };

                    this.initialized = true;
                    console.log('✓ Synthetic audio system initialized');

                    // Update loading status
                    const loadingStatus = document.getElementById('loading-status');
                    if (loadingStatus) {
                        loadingStatus.textContent = '🎵 Audio system ready! Click a weather button to test sound.';
                        loadingStatus.style.color = '#00ff88';
                    }

                } catch (error) {
                    console.warn('Web Audio API not supported:', error);
                    this.initialized = false;
                    const loadingStatus = document.getElementById('loading-status');
                    if (loadingStatus) {
                        loadingStatus.textContent = '⚠️ Audio not available in this browser';
                        loadingStatus.style.color = '#ff6666';
                    }
                }
            }

            playFallbackRain() {
                if (!this.audioContext) return;

                // Create rain sound using white noise with filtering
                const bufferSize = this.audioContext.sampleRate * 2;
                const buffer = this.audioContext.createBuffer(1, bufferSize, this.audioContext.sampleRate);
                const data = buffer.getChannelData(0);

                // Generate brown noise for rain
                for (let i = 0; i < bufferSize; i++) {
                    data[i] = (Math.random() * 2 - 1) * 0.3;
                }

                const source = this.audioContext.createBufferSource();
                const filter = this.audioContext.createBiquadFilter();
                const gainNode = this.audioContext.createGain();

                filter.type = 'bandpass';
                filter.frequency.setValueAtTime(1000, this.audioContext.currentTime);
                filter.Q.setValueAtTime(0.5, this.audioContext.currentTime);

                gainNode.gain.setValueAtTime(this.volume * 0.8, this.audioContext.currentTime);

                source.buffer = buffer;
                source.loop = true;
                source.connect(filter);
                filter.connect(gainNode);
                gainNode.connect(this.audioContext.destination);
                source.start();

                this.currentSound = source;
                this.currentGainNode = gainNode; // Store reference for real-time volume control
                console.log('🌧️ Playing synthetic rain sound');
            }

            playFallbackThunder() {
                if (!this.audioContext) return;

                // Create thunder sound using low frequency oscillation with envelope
                const oscillator = this.audioContext.createOscillator();
                const gainNode = this.audioContext.createGain();
                const filter = this.audioContext.createBiquadFilter();

                oscillator.type = 'sawtooth';
                oscillator.frequency.setValueAtTime(40, this.audioContext.currentTime);

                filter.type = 'lowpass';
                filter.frequency.setValueAtTime(200, this.audioContext.currentTime);

                // Thunder envelope - starts loud, fades quickly
                gainNode.gain.setValueAtTime(0, this.audioContext.currentTime);
                gainNode.gain.linearRampToValueAtTime(this.volume * 0.6, this.audioContext.currentTime + 0.1);
                gainNode.gain.exponentialRampToValueAtTime(this.volume * 0.1, this.audioContext.currentTime + 2);

                oscillator.connect(filter);
                filter.connect(gainNode);
                gainNode.connect(this.audioContext.destination);
                oscillator.start();

                // Add rumbling effect
                setTimeout(() => {
                    oscillator.frequency.setValueAtTime(30, this.audioContext.currentTime);
                }, 500);

                this.currentSound = oscillator;
                this.currentGainNode = gainNode; // Store reference for real-time volume control
                console.log('⚡ Playing synthetic thunder sound');
            }

            playFallbackSnow() {
                if (!this.audioContext) return;

                // Create gentle wind/snow sound using filtered white noise
                const bufferSize = this.audioContext.sampleRate * 3;
                const buffer = this.audioContext.createBuffer(1, bufferSize, this.audioContext.sampleRate);
                const data = buffer.getChannelData(0);

                // Generate soft white noise
                for (let i = 0; i < bufferSize; i++) {
                    data[i] = (Math.random() * 2 - 1) * 0.15;
                }

                const source = this.audioContext.createBufferSource();
                const filter = this.audioContext.createBiquadFilter();
                const gainNode = this.audioContext.createGain();

                filter.type = 'highpass';
                filter.frequency.setValueAtTime(2000, this.audioContext.currentTime);

                gainNode.gain.setValueAtTime(this.volume * 0.4, this.audioContext.currentTime);

                source.buffer = buffer;
                source.loop = true;
                source.connect(filter);
                filter.connect(gainNode);
                gainNode.connect(this.audioContext.destination);
                source.start();

                this.currentSound = source;
                this.currentGainNode = gainNode; // Store reference for real-time volume control
                console.log('❄️ Playing synthetic snow sound');
            }

            playFallbackSunny() {
                if (!this.audioContext) return;

                // Create pleasant sunny day ambience using multiple sine waves
                const oscillator1 = this.audioContext.createOscillator();
                const oscillator2 = this.audioContext.createOscillator();
                const gainNode = this.audioContext.createGain();

                oscillator1.type = 'sine';
                oscillator1.frequency.setValueAtTime(220, this.audioContext.currentTime);

                oscillator2.type = 'sine';
                oscillator2.frequency.setValueAtTime(330, this.audioContext.currentTime);

                gainNode.gain.setValueAtTime(this.volume * 0.2, this.audioContext.currentTime);

                // Create a merger to blend the oscillators
                const merger = this.audioContext.createChannelMerger(2);

                oscillator1.connect(merger, 0, 0);
                oscillator2.connect(merger, 0, 1);
                merger.connect(gainNode);
                gainNode.connect(this.audioContext.destination);

                oscillator1.start();
                oscillator2.start();

                this.currentSound = {
                    osc1: oscillator1,
                    osc2: oscillator2
                };
                this.currentGainNode = gainNode; // Store reference for real-time volume control
                console.log('☀️ Playing synthetic sunny sound');
            }

            playFallbackCloudy() {
                if (!this.audioContext) return;

                // Create subtle wind sound using filtered noise
                const bufferSize = this.audioContext.sampleRate * 2;
                const buffer = this.audioContext.createBuffer(1, bufferSize, this.audioContext.sampleRate);
                const data = buffer.getChannelData(0);

                // Generate pink noise for wind
                for (let i = 0; i < bufferSize; i++) {
                    data[i] = (Math.random() * 2 - 1) * 0.2;
                }

                const source = this.audioContext.createBufferSource();
                const filter = this.audioContext.createBiquadFilter();
                const gainNode = this.audioContext.createGain();

                filter.type = 'bandpass';
                filter.frequency.setValueAtTime(500, this.audioContext.currentTime);
                filter.Q.setValueAtTime(1, this.audioContext.currentTime);

                gainNode.gain.setValueAtTime(this.volume * 0.3, this.audioContext.currentTime);

                source.buffer = buffer;
                source.loop = true;
                source.connect(filter);
                filter.connect(gainNode);
                gainNode.connect(this.audioContext.destination);
                source.start();

                this.currentSound = source;
                this.currentGainNode = gainNode; // Store reference for real-time volume control
                console.log('☁️ Playing synthetic cloudy sound');
            }

            stopCurrentSound() {
                if (this.currentSound) {
                    try {
                        if (this.currentSound.stop) {
                            // Single audio source
                            this.currentSound.stop();
                        } else if (this.currentSound.osc1 && this.currentSound.osc2) {
                            // Multiple oscillators (sunny sound)
                            this.currentSound.osc1.stop();
                            this.currentSound.osc2.stop();
                        }
                    } catch (e) {
                        // Sound might already be stopped
                    }
                    this.currentSound = null;
                    this.currentGainNode = null; // Clear the gain node reference
                }
            }

            setVolume(volume) {
                this.volume = Math.max(0, Math.min(1, volume));

                // Update currently playing sound volume in real-time
                if (this.currentGainNode && this.audioContext) {
                    try {
                        // Calculate appropriate volume multiplier based on current weather
                        let volumeMultiplier = 0.5; // default

                        // Adjust multiplier based on sound type (match the original multipliers)
                        if (currentWeather === 'r') volumeMultiplier = 0.8; // rain
                        else if (currentWeather === 't') volumeMultiplier = 0.6; // thunder
                        else if (currentWeather === 's') volumeMultiplier = 0.4; // snow
                        else if (currentWeather === 'h') volumeMultiplier = 0.2; // sunny
                        else if (currentWeather === 'c') volumeMultiplier = 0.3; // cloudy

                        // Smoothly transition to new volume to avoid audio pops
                        this.currentGainNode.gain.cancelScheduledValues(this.audioContext.currentTime);
                        this.currentGainNode.gain.setValueAtTime(this.currentGainNode.gain.value, this.audioContext.currentTime);
                        this.currentGainNode.gain.linearRampToValueAtTime(this.volume * volumeMultiplier, this.audioContext.currentTime + 0.1);

                        console.log(`🔊 Real-time volume updated to ${Math.round(this.volume * 100)}%`);
                    } catch (error) {
                        console.log(`⚠️ Could not update real-time volume: ${error.message}`);
                    }
                } else {
                    console.log(`🔊 Volume set to ${Math.round(this.volume * 100)}% (will apply to next sound)`);
                }
            }

            async playWeatherSound(weather) {
                if (!this.initialized) {
                    console.warn(`Audio system not initialized`);
                    return;
                }

                if (!this.sounds[weather]) {
                    console.warn(`Sound for ${weather} not available`);
                    return;
                }

                // Resume audio context if suspended
                if (this.audioContext && this.audioContext.state === 'suspended') {
                    await this.audioContext.resume();
                }

                // Stop current sound
                this.stopCurrentSound();

                try {
                    const sound = this.sounds[weather];

                    if (typeof sound === 'function') {
                        // It's a synthetic sound function
                        sound();
                        console.log(`✓ Successfully playing synthetic ${weather} sound`);
                    }
                } catch (error) {
                    console.warn(`Could not play ${weather} sound:`, error);
                }
            }

            setVolume(volume) {
                this.volume = Math.max(0, Math.min(1, volume));
                console.log(`🔊 Volume set to ${Math.round(this.volume * 100)}%`);
                // Volume changes will apply to new sounds
            }
        }

        // Initialize audio manager
        const audioManager = new AudioManager();

        // Constants
        const WINDOW_WIDTH = 640;
        const WINDOW_HEIGHT = 480;
        const MAX_RAIN_DROPS = 100;
        const MAX_SNOWFLAKES = 100;
        const MAX_CLOUDS = 5;

        // Weather state
        let currentWeather = 'h';
        let animationTime = 0;

        // Initialize weather elements
        const rainDrops = Array.from({
            length: MAX_RAIN_DROPS
        }, () => ({
            x: Math.random() * WINDOW_WIDTH,
            y: Math.random() * WINDOW_HEIGHT
        }));

        const snowflakes = Array.from({
            length: MAX_SNOWFLAKES
        }, () => ({
            x: Math.random() * WINDOW_WIDTH,
            y: Math.random() * WINDOW_HEIGHT
        }));

        const clouds = Array.from({
            length: MAX_CLOUDS
        }, () => ({
            x: Math.random() * WINDOW_WIDTH,
            y: Math.random() * 100 + 50
        }));

        // Airplane data
        const airplanes = [{
            x: -100,
            y: 100,
            speed: 2.0,
            type: 0,
            weatherType: 'h',
            active: true
        }, {
            x: -60,
            y: 60,
            speed: 7.0,
            type: 1,
            weatherType: 'h',
            active: true
        }, {
            x: -20,
            y: 20,
            speed: 11.0,
            type: 2,
            weatherType: 'h',
            active: true
        }, {
            x: WINDOW_WIDTH / 2,
            y: 5,
            speed: 0,
            type: 3,
            weatherType: 'h',
            active: true
        }];

        // Drawing functions
        function drawFilledCircle(x, y, radius, color = null) {
            ctx.beginPath();
            ctx.arc(x, y, radius, 0, 2 * Math.PI);
            if (color) ctx.fillStyle = color;
            ctx.fill();
        }

        function drawSunnyBackground() {
            // Sky
            ctx.fillStyle = '#6495ED';
            ctx.fillRect(0, 0, WINDOW_WIDTH, WINDOW_HEIGHT - 100);

            // Ground
            ctx.fillStyle = '#228B22';
            ctx.fillRect(0, WINDOW_HEIGHT - 100, WINDOW_WIDTH, 100);

            // Sun
            ctx.fillStyle = '#FFFF00';
            drawFilledCircle(100, 100, 50);
        }

        function drawRain() {
            ctx.strokeStyle = '#00FFFF';
            ctx.lineWidth = 2;

            rainDrops.forEach(drop => {
                ctx.beginPath();
                ctx.moveTo(drop.x, drop.y);
                ctx.lineTo(drop.x, drop.y + 10);
                ctx.stroke();

                drop.y += 7;
                if (drop.y >= WINDOW_HEIGHT) {
                    drop.y = Math.random() * 100;
                    drop.x = Math.random() * WINDOW_WIDTH;
                }
            });
        }

        function drawSnow() {
            ctx.fillStyle = '#FFFFFF';

            snowflakes.forEach(flake => {
                drawFilledCircle(flake.x, flake.y, 3);

                flake.y += 2;
                flake.x += Math.sin(animationTime * 0.01 + flake.y * 0.01) * 0.5;

                if (flake.y >= WINDOW_HEIGHT) {
                    flake.y = Math.random() * 100;
                    flake.x = Math.random() * WINDOW_WIDTH;
                }
            });
        }

        function drawThunderstorm() {
            drawRain();

            // Lightning effect
            if (Math.random() < 0.05) {
                ctx.strokeStyle = '#FFFF00';
                ctx.lineWidth = 3;
                const x = Math.random() * WINDOW_WIDTH;
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x + Math.random() * 50 - 25, WINDOW_HEIGHT / 3);
                ctx.lineTo(x + Math.random() * 100 - 50, WINDOW_HEIGHT / 2);
                ctx.lineTo(x + Math.random() * 50 - 25, WINDOW_HEIGHT);
                ctx.stroke();
            }
        }

        function drawCloudy() {
            clouds.forEach(cloud => {
                // Main cloud body
                ctx.fillStyle = '#A9A9A9';
                drawFilledCircle(cloud.x, cloud.y, 22);

                ctx.fillStyle = '#C0C0C0';
                drawFilledCircle(cloud.x + 20, cloud.y - 10, 22);
                drawFilledCircle(cloud.x - 20, cloud.y - 10, 22);

                ctx.fillStyle = '#D3D3D3';
                drawFilledCircle(cloud.x + 10, cloud.y + 10, 18);

                cloud.x += 1;
                if (cloud.x > WINDOW_WIDTH + 60) cloud.x = -60;
            });
        }

        function drawDancer(x, y, isGirl, shirtColor, pantsColor) {
            const sway = Math.sin(animationTime * 0.005) * 10;
            const armSwing = Math.sin(animationTime * 0.01) * 15;
            const legMove = Math.sin(animationTime * 0.01) * 15;

            // Head
            ctx.fillStyle = '#FFE0BD';
            drawFilledCircle(x, y - 50, 15);

            // Body
            ctx.fillStyle = shirtColor;
            ctx.fillRect(x - 10 + sway, y - 40, 20, 40);

            // Legs/Skirt
            ctx.fillStyle = pantsColor;
            if (isGirl) {
                // Skirt shape
                ctx.beginPath();
                ctx.moveTo(x - 10 + sway, y);
                ctx.lineTo(x + 10 + sway, y);
                ctx.lineTo(x + 15 + sway, y + 20);
                ctx.lineTo(x - 15 + sway, y + 20);
                ctx.closePath();
                ctx.fill();
            } else {
                ctx.fillRect(x - 10 + sway, y, 20, 40);
            }

            // Arms
            ctx.strokeStyle = '#FFE0BD';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(x - 10 + sway, y - 30);
            ctx.lineTo(x - 30 + armSwing, y - 10);
            ctx.moveTo(x + 10 + sway, y - 30);
            ctx.lineTo(x + 30 - armSwing, y - 10);
            ctx.stroke();

            // Legs
            ctx.beginPath();
            ctx.moveTo(x - 10 + sway, y + 40);
            ctx.lineTo(x - 10 + legMove, y + 70);
            ctx.moveTo(x + 10 + sway, y + 40);
            ctx.lineTo(x + 10 - legMove, y + 70);
            ctx.stroke();
        }

        function drawUmbrella(x, y) {
            // Canopy
            ctx.fillStyle = '#FF0000';
            ctx.beginPath();
            ctx.arc(x, y, 50, Math.PI, 0, false);
            ctx.fill();

            // Ribs
            ctx.strokeStyle = '#800000';
            ctx.lineWidth = 2;
            for (let angle = -90; angle <= 90; angle += 15) {
                const rad = angle * Math.PI / 180;
                ctx.beginPath();
                ctx.moveTo(x, y);
                ctx.lineTo(x + 50 * Math.cos(rad), y + 50 * Math.sin(rad));
                ctx.stroke();
            }

            // Handle
            ctx.strokeStyle = '#8B4513';
            ctx.lineWidth = 4;
            ctx.beginPath();
            ctx.moveTo(x, y);
            ctx.lineTo(x, y + 60);
            ctx.lineTo(x - 5, y + 70);
            ctx.stroke();
        }

        function drawAirplane(airplane) {
            ctx.fillStyle = '#FF0000';

            // Body
            ctx.fillRect(airplane.x, airplane.y - 5, 40, 10);

            // Wings
            ctx.beginPath();
            ctx.moveTo(airplane.x + 15, airplane.y - 10);
            ctx.lineTo(airplane.x + 30, airplane.y);
            ctx.lineTo(airplane.x + 15, airplane.y + 10);
            ctx.closePath();
            ctx.stroke();

            // Tail
            ctx.beginPath();
            ctx.moveTo(airplane.x, airplane.y - 5);
            ctx.lineTo(airplane.x - 10, airplane.y - 10);
            ctx.lineTo(airplane.x - 10, airplane.y + 5);
            ctx.closePath();
            ctx.stroke();

            // Labels
            ctx.fillStyle = '#FFBF00';
            ctx.font = '16px Arial';
            ctx.shadowColor = 'rgba(0,0,0,0.8)';
            ctx.shadowOffsetX = 2;
            ctx.shadowOffsetY = 2;

            switch (airplane.type) {
                case 1: // Weather display plane
                    const weatherLabels = {
                        's': 'SNOWING',
                        'r': 'RAINING',
                        't': 'THUNDERING',
                        'c': 'CLOUDY',
                        'h': 'SUNNY'
                    };
                    ctx.fillText(weatherLabels[airplane.weatherType], airplane.x - 50, airplane.y - 5);
                    break;
                case 2: // RAM plane
                    ctx.fillText('MY_MATE', airplane.x - 40, airplane.y - 3);
                    break;
                case 3: // MY_MATE plane
                    ctx.fillText('WEATHER_SIMULATION', airplane.x - 100, airplane.y - 5);
                    break;
            }
            ctx.shadowColor = 'transparent';
        }

        function updateAirplanes() {
            airplanes.forEach(airplane => {
                if (airplane.active) {
                    airplane.x += airplane.speed;
                    if (airplane.x > WINDOW_WIDTH + 50) {
                        airplane.x = -50;
                        if (airplane.type === 1) {
                            airplane.y = 20 + Math.random() * 100;
                        }
                    }
                }
            });
        }

        function renderText(text, x, y, color = '#FFBF00') {
            ctx.fillStyle = 'rgba(0,0,0,0.8)';
            ctx.font = '24px Arial';
            ctx.fillText(text, x + 2, y + 2);

            ctx.fillStyle = color;
            ctx.fillText(text, x, y);
        }

        function drawWeatherInfo() {
            const weatherNames = {
                'h': 'Sunny',
                'r': 'Raining',
                's': 'Snowing',
                't': 'Thundering',
                'c': 'Cloudy'
            };
            renderText(weatherNames[currentWeather], 20, 50);
        }

        function animate() {
            animationTime = Date.now();

            // Clear canvas with weather-appropriate background
            switch (currentWeather) {
                case 's':
                    ctx.fillStyle = '#87CEEB';
                    ctx.fillRect(0, 0, WINDOW_WIDTH, WINDOW_HEIGHT);
                    drawSnow();
                    break;
                case 'r':
                    ctx.fillStyle = '#4682B4';
                    ctx.fillRect(0, 0, WINDOW_WIDTH, WINDOW_HEIGHT);
                    drawRain();
                    break;
                case 't':
                    ctx.fillStyle = '#323232';
                    ctx.fillRect(0, 0, WINDOW_WIDTH, WINDOW_HEIGHT);
                    drawThunderstorm();
                    break;
                case 'c':
                    ctx.fillStyle = '#B0C4DE';
                    ctx.fillRect(0, 0, WINDOW_WIDTH, WINDOW_HEIGHT);
                    drawCloudy();
                    break;
                default:
                    drawSunnyBackground();
                    break;
            }

            // Update and draw airplanes
            updateAirplanes();
            airplanes.forEach(airplane => {
                if (airplane.active) {
                    drawAirplane(airplane);
                }
            });

            // Draw dancers
            drawDancer(WINDOW_WIDTH / 3, WINDOW_HEIGHT - 80, false, '#0000FF', '#000080');
            drawDancer(2 * WINDOW_WIDTH / 3, WINDOW_HEIGHT - 80, true, '#FF69B4', '#FF1493');

            // Draw umbrella
            drawUmbrella(WINDOW_WIDTH / 2, WINDOW_HEIGHT - 120);

            // Draw weather info
            drawWeatherInfo();

            // Draw creator name
            renderText('Hritik Kushwaha', WINDOW_WIDTH / 2 - 100, WINDOW_HEIGHT - 20);

            requestAnimationFrame(animate);
        }

        function changeWeather(weather) {
            currentWeather = weather;

            // Update weather display airplane
            airplanes.forEach(airplane => {
                if (airplane.type === 1) {
                    airplane.weatherType = weather;
                }
            });

            // Update button states
            document.querySelectorAll('button').forEach(btn => btn.classList.remove('active'));
            const buttonMap = {
                'h': 'sunny-btn',
                'r': 'rain-btn',
                's': 'snow-btn',
                't': 'thunder-btn',
                'c': 'cloudy-btn'
            };
            document.getElementById(buttonMap[weather]).classList.add('active');

            // Enable audio on button click and play weather sound
            enableAudio();

            // Play weather sound if not muted
            if (!isMuted) {
                console.log(`Changing weather to ${weather}, attempting to play sound`);
                audioManager.playWeatherSound(weather);
            } else {
                console.log(`Weather changed to ${weather} but audio is muted`);
            }
        }

        // Audio control functions
        let isMuted = false;

        function toggleMute() {
            isMuted = !isMuted;
            const muteBtn = document.getElementById('mute-btn');

            if (isMuted) {
                audioManager.stopCurrentSound();
                muteBtn.textContent = '🔇 Muted';
                muteBtn.style.background = 'linear-gradient(145deg, #666, #444)';
            } else {
                muteBtn.textContent = '🔊 Sound';
                muteBtn.style.background = '';
                audioManager.playWeatherSound(currentWeather);
            }
        }

        function setVolume(value) {
            const volume = value / 100;
            audioManager.setVolume(volume);

            // Update volume display
            console.log(`🔊 Volume slider moved to: ${value}%`);

            // If there's a currently playing sound and we're not muted, restart it with new volume
            if (!isMuted && audioManager.initialized && currentWeather) {
                audioManager.playWeatherSound(currentWeather);
            }
        }

        // Enable audio on first user interaction (required by browsers)
        let audioEnabled = false;

        async function enableAudio() {
            if (!audioEnabled) {
                audioEnabled = true;
                console.log('Audio enabled by user interaction');

                // Try to resume audio context if it exists
                if (audioManager.audioContext && audioManager.audioContext.state === 'suspended') {
                    await audioManager.audioContext.resume();
                }

                // Update loading status to show audio is ready
                const loadingStatus = document.getElementById('loading-status');
                if (loadingStatus) {
                    loadingStatus.textContent = '🎵 Audio ready! Try changing the weather to hear sounds.';
                    loadingStatus.style.color = '#00ff88';
                    setTimeout(() => {
                        loadingStatus.style.opacity = '0.7';
                        loadingStatus.style.fontSize = '10px';
                    }, 3000);
                }

                if (audioManager.initialized && !isMuted) {
                    await audioManager.playWeatherSound(currentWeather);
                }
            }
        }

        // Multiple event listeners to ensure audio activation
        document.addEventListener('click', enableAudio);
        document.addEventListener('touchstart', enableAudio);
        document.addEventListener('keydown', enableAudio);

        // Keyboard controls
        document.addEventListener('keydown', (event) => {
            const key = event.key.toLowerCase();
            if (['r', 's', 't', 'c', 'h'].includes(key)) {
                changeWeather(key);
            }
            if (key === 'm') {
                toggleMute();
            }
        });

        // Start animation
        animate();
    </script>
</body>

</html>